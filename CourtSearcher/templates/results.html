{% extends "base.html" %}
{% block title %}
Case Results â€“ {{ search_params.case_type }}/{{ search_params.case_number }}/{{ search_params.filing_year }}
{% endblock %}

{% block content %}
<div class="row">
  <div class="col-12">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <div>
        <h2 class="mb-1"><i class="fas fa-file-alt text-info me-2"></i>Case Details</h2>
        <p class="text-muted mb-0">
          <strong>{{ search_params.case_type }}/{{ search_params.case_number }}/{{ search_params.filing_year }}</strong>
        </p>
      </div>
      <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">
        <i class="fas fa-arrow-left me-1"></i>New Search
      </a>
    </div>

    <div class="card shadow-lg mb-4">
      <div class="card-header bg-success text-white">
        <h5 class="card-title mb-0"><i class="fas fa-info-circle me-2"></i>Case Information</h5>
      </div>
      <div class="card-body">
        {% if case_data.case_title %}
        <div class="mb-3"><h6 class="text-info">Case Title</h6>
          <p class="mb-0 fw-bold">{{ case_data.case_title }}</p>
        </div>
        {% endif %}
        <div class="row g-3">
          {% if case_data.petitioner %}
          <div class="col-md-6"><h6 class="text-info"><i class="fas fa-user me-1"></i>Petitioner/Appellant</h6>
            <p class="mb-0">{{ case_data.petitioner }}</p></div>
          {% endif %}
          {% if case_data.respondent %}
          <div class="col-md-6"><h6 class="text-info"><i class="fas fa-user me-1"></i>Respondent</h6>
            <p class="mb-0">{{ case_data.respondent }}</p></div>
          {% endif %}
          {% if case_data.filing_date %}
          <div class="col-md-6"><h6 class="text-info"><i class="fas fa-calendar-plus me-1"></i>Filing Date</h6>
            <p class="mb-0">{{ case_data.filing_date }}</p></div>
          {% endif %}
          {% if case_data.next_hearing_date %}
          <div class="col-md-6"><h6 class="text-info"><i class="fas fa-calendar-check me-1"></i>Next Hearing Date</h6>
            <p class="mb-0">{{ case_data.next_hearing_date }}</p></div>
          {% endif %}
          {% if case_data.case_status %}
          <div class="col-md-6"><h6 class="text-info"><i class="fas fa-flag me-1"></i>Case Status</h6>
            <p class="mb-0">{{ case_data.case_status }}</p></div>
          {% endif %}
          {% if case_data.last_order_date %}
          <div class="col-md-6"><h6 class="text-info"><i class="fas fa-gavel me-1"></i>Last Order Date</h6>
            <p class="mb-0">{{ case_data.last_order_date }}</p></div>
          {% endif %}
        </div>
      </div>
    </div>

    {% if pdf_links %}
    <div class="card shadow-lg mb-4">
      <div class="card-header bg-warning text-dark">
        <h5 class="card-title mb-0"><i class="fas fa-file-pdf me-2"></i>Available Documents</h5>
      </div>
      <div class="card-body">
        <div class="row g-3">
          {% for pdf in pdf_links %}
          <div class="col-md-6">
            <div class="card border-secondary">
              <div class="card-body">
                <h6 class="card-title"><i class="fas fa-file-pdf text-danger me-2"></i>{{ pdf.title or 'Document' }}</h6>
                <p class="small text-muted">Type: {{ pdf.type|title if pdf.type else 'Document' }}</p>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
    {% else %}
    <div class="card border-secondary mb-4 text-center">
      <i class="fas fa-file-pdf text-muted" style="font-size:3rem;"></i>
      <h6 class="mt-3 text-muted">No Documents Available</h6>
      <p class="text-muted small">No PDF documents were found for this case. Documents may become available later.</p>
    </div>
    {% endif %}

    <div class="alert alert-info mt-4" role="alert">
      <h6 class="alert-heading"><i class="fas fa-exclamation-circle me-2"></i>Important Disclaimer</h6>
      <p class="mb-2">For official records, visit the <a href="https://delhihighcourt.nic.in/" target="_blank" class="alert-link">Delhi High Court website</a>.</p>
      <hr>
      <p class="mb-0 small"><strong>Data fetched:</strong>
        {% if case_data.scraped_timestamp %}
          {{ moment(case_data.scraped_timestamp).format('LLL') }}
        {% else %}
          this search
        {% endif %}
      </p>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
  {{ super() }}
  {{ moment.include_moment() }}
{% endblock %}
